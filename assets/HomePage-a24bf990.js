import{d as y,o as r,c as g,a as m,u as V,s as C,r as t,b as w,w as n,e as p,f as e,g as k,h as $,i as F,j as P,F as R,k as B,l as j}from"./index-30b9f8d8.js";import{u as S,_ as N}from"./VideoPlayer.vue_vue_type_style_index_0_lang-0e00b8c6.js";const U={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},z=m("path",{d:"M80 152v256a40.12 40.12 0 0 0 40 40h272a40.12 40.12 0 0 0 40-40V152",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),O=m("rect",{x:"48",y:"64",width:"416",height:"80",rx:"28",ry:"28",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),L=m("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 304l-64 64l-64-64"},null,-1),M=m("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 345.89V224"},null,-1),A=[z,O,L,M],H=y({name:"ArchiveOutline",render:function(h,l){return r(),g("svg",U,A)}}),D={class:"home-page__upload"},E={style:{"margin-bottom":"12px"}},G=y({__name:"UploadFile",setup(x){const h=V(),{fetchStatus:l}=C(S()),{uploadVideo:_,checkVideoStatus:i}=S(),a=async c=>{const o=await _(c);o!=null&&o.id&&await i(o.id),(o==null?void 0:o.status)==="error"&&h.error({content:"Что-то пошло не так",duration:3e3})};return(c,o)=>{const s=t("n-spin"),f=t("n-icon"),v=t("n-text"),d=t("n-p"),b=t("n-upload-dragger"),u=t("n-upload"),T=t("n-card");return r(),w(T,null,{default:n(()=>[m("div",D,[p(l)==="loading"?(r(),w(s,{key:0,size:"large",style:{width:"100%"}})):(r(),w(u,{key:1,"directory-dnd":"","on-change":a,"show-file-list":!1,accept:"video/mp4"},{default:n(()=>[e(b,null,{default:n(()=>[m("div",E,[e(f,{size:"48",depth:3,component:p(H)},null,8,["component"])]),e(v,{style:{"font-size":"16px"}},{default:n(()=>[k(" Кликните или перетащите файл ")]),_:1}),e(d,{depth:"3",style:{margin:"8px 0 0 0"}},{default:n(()=>[k(" Доступный формат: .mp4 ")]),_:1}),e(d,{depth:"3",style:{margin:"8px 0 0 0"}},{default:n(()=>[k(" Максимальный размер: 250 МБ ")]),_:1})]),_:1})]),_:1}))])]),_:1})}}}),I=["src"],q=y({__name:"RTSPLink",setup(x){const{theme:h}=C($()),l={color:"#FFFFFF"},_={color:"#333333"},i=F(null),a=F(null),c=()=>{i.value=`https://89.232.165.248.sslip.io/api/v1/ml/rl?url_rtsp=${a.value}`};return(o,s)=>{const f=t("n-input"),v=t("n-button"),d=t("n-card"),b=t("n-modal");return r(),g(R,null,[e(d,null,{default:n(()=>[e(f,{value:a.value,"onUpdate:value":s[0]||(s[0]=u=>a.value=u),placeholder:"Введите ссылку на RTSP поток","theme-overrides":p(h)===null?l:_},null,8,["value","theme-overrides"]),e(v,{type:"primary",style:{width:"100%","margin-top":"1rem"},onClick:c},{default:n(()=>[k("Отправить")]),_:1})]),_:1}),e(b,{show:i.value,"onUpdate:show":s[1]||(s[1]=u=>i.value=u),preset:"card",style:{width:"fit-content","min-width":"40vw"},onClose:s[2]||(s[2]=u=>a.value=null)},{default:n(()=>[i.value?(r(),g("img",{key:0,style:{"max-width":"40vw","min-height":"40vh",width:"100%",height:"100%"},src:i.value,alt:"stream"},null,8,I)):P("",!0)]),_:1},8,["show"])],64)}}}),J={class:"home-page"},W=y({__name:"HomePage",setup(x){const{fetchStatus:h,videoId:l,videoPath:_}=C(S());return B(()=>{l.value=null,_.value=null}),(i,a)=>{const c=t("n-tab-pane"),o=t("n-tabs"),s=t("n-spin"),f=t("n-result"),v=t("n-modal");return r(),g("div",J,[e(o,{type:"segment"},{default:n(()=>[e(c,{name:"video",tab:"Видео"},{default:n(()=>[e(G)]),_:1}),e(c,{name:"link",tab:"RTSP поток"},{default:n(()=>[e(q)]),_:1})]),_:1}),e(v,{show:p(l),"onUpdate:show":a[0]||(a[0]=d=>j(l)?l.value=d:null),preset:"card",style:{width:"fit-content","min-width":"50vw"}},{default:n(()=>[p(_)?(r(),w(N,{key:0,path:p(_)},null,8,["path"])):(r(),w(f,{key:1,status:"info",title:"Подождите, видео обрабатывается"},{footer:n(()=>[e(s,{size:"large"})]),_:1}))]),_:1},8,["show"])])}}});export{W as default};
